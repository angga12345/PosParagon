<openerp>
    <data>
    	<!--tags product.template-->
    	<record id="custom_product_template_category" model="ir.ui.view">
            <field name="name">custom.product.template.category</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="point_of_sale.product_template_form_view"/>
            <field name="arch" type="xml">          	
				<field name="to_weight" position="after">
                   	<field name="category_ids" widget="many2many_tags"/>
                   	<field name="pos_category_ids" widget="many2many_tags"/>
                </field>
                <xpath expr="//field[@name='pos_categ_id']" position="attributes">
                	<attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <!--tags product.product
    	<record id="custom_product_product_category" model="ir.ui.view">
            <field name="name">custom.product.product.category</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_normal_form_view"/>
            <field name="arch" type="xml">          	
				<field name="default_code" position="after">
                   	<field name="category_ids" widget="many2many_tags"/>
                </field>
            </field>
        </record>-->
        
        <record id="custom_product_pricelist_tree_view" model="ir.ui.view">
            <field name="name">custom.product.pricelist.tree.view</field>
            <field name="model">product.pricelist.item</field>
            <field name="inherit_id" ref="product.product_pricelist_item_tree_view"/>
            <field name="arch" type="xml">           	
				<xpath expr="//tree/field[@name = 'categ_id']" position="replace">
            		<field name = "categ_id" invisible = "1"/>
				</xpath>
				<xpath expr="//tree/field[@name = 'product_tmpl_id']" position="after">
            		<field name = "category_ids" />
				</xpath>
			</field>
        </record>
        
        <record id="custom_product_pricelist_form_view" model="ir.ui.view">
            <field name="name">custom.product.pricelist.form.view</field>
            <field name="model">product.pricelist.item</field>
            <field name="inherit_id" ref="product.product_pricelist_item_form_view"/>
            <field name="arch" type="xml">         	
            	<xpath expr="//form/group/group/field[@name = 'categ_id']" position="replace">
            		<field name = "categ_id" invisible = "1"/>
				</xpath>
            	<xpath expr="//form/group/group/field[@name = 'applied_on']" position="after">
            		<field name = "category_ids" widget="many2many_tags"
            		attrs="{'invisible':[('applied_on', '!=', '2_product_category')], 'required':[('applied_on', '=', '2_product_category')]}"
            		/>            		
				</xpath>           		
            </field>
        </record>
        
        <record id="custom_product_pricelist_form" model="ir.ui.view">
            <field name="name">custom.product.pricelist.form</field>
            <field name="model">product.pricelist</field>
            <field name="inherit_id" ref="product.product_pricelist_view"/>
            <field name="arch" type="xml">         	
            	<xpath expr="//form/sheet/div/field/tree/field[@name = 'name']" position="replace">
            		<field name = "name" />
				</xpath>
            </field>
        </record>
    	
        <record id="pos_product_categories_view_form" model="ir.ui.view">
        	<field name="name">pos.product.categories.view.form</field>
            <field name="model">pos.product.category</field>
            <field name="arch" type="xml">         	
            	<form>
            		<sheet>
            			<group>
            				<group colspan="4" col="2">
								<field name="name" required="1"/>
								<field name="parent_id"/>
            				</group>
            			</group>
            		</sheet>
            	</form>
            </field>
        </record>

		<record id="pos_product_categories_view_tree" model="ir.ui.view">
			<field name="name">pos.product.categories.view.tree</field>
			<field name="model">pos.product.category</field>
			<field name="arch" type="xml">         	
				<tree>
					<field name="name"/>
				</tree>
			</field>
		</record>
		
		<record id="pos_product_categories_action" model="ir.actions.act_window">
			<field name="name">Pos Product Categories</field>
			<field name="res_model">pos.product.category</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
				Category
				</p> 
			</field>
		</record>      

		<menuitem 
			action="pos_product_categories_action"
			id="pos_product_category_menu" 
			parent="point_of_sale.menu_point_config_product" sequence="17"
		/>
    </data>
</openerp>